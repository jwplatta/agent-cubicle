services:
  #########################
  ### CLAUDE CONTAINERS ###
  #########################
  claude-base:
    build:
      context: .
      dockerfile: containers/Dockerfile.claude-base
    image: agent-cubicle-claude-base:latest
    container_name: claude-base-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/claude/:/home/claude/.claude
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/claude/.config/gh
      - ./config/ssh/id_ed25519:/home/claude/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/claude/.gitconfig.host:ro
      - ./mcp/obsidian-mcp:/home/claude/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
      - ./hooks:/home/claude/.claude/hooks:ro
      - ./skills:/home/claude/.claude/skills:ro
      - ./commands:/home/claude/.claude/commands:ro
      - ./agents:/home/claude/.claude/agents:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  claude-python:
    depends_on:
      - claude-base
    build:
      context: .
      dockerfile: containers/Dockerfile.claude-python
    container_name: claude-python-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/claude/:/home/claude/.claude
      - ./config/shared/BASE_AGENT.md:/home/claude/.claude/CLAUDE.md
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/claude/.config/gh
      - ./config/ssh/id_ed25519:/home/claude/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/claude/.gitconfig.host:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/claude/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
      - ./skills:/home/claude/.claude/skills:ro
      - ./commands:/home/claude/.claude/commands:ro
      - ./agents:/home/claude/.claude/agents:ro
      - ./hooks:/home/claude/.claude/hooks:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  claude-ruby:
    depends_on:
      - claude-base
    build:
      context: .
      dockerfile: containers/Dockerfile.claude-ruby
    container_name: claude-ruby-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/claude/:/home/claude/.claude
      - ./config/shared/BASE_AGENT.md:/home/claude/.claude/CLAUDE.md
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/claude/.config/gh
      - ./config/ssh/id_ed25519:/home/claude/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/claude/.gitconfig.host:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/claude/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
      - ./skills:/home/claude/.claude/skills:ro
      - ./commands:/home/claude/.claude/commands:ro
      - ./agents:/home/claude/.claude/agents:ro
      - ./hooks:/home/claude/.claude/hooks:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  claude-node:
    depends_on:
      - claude-base
    build:
      context: .
      dockerfile: containers/Dockerfile.claude-node
    container_name: claude-node-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/claude/:/home/claude/.claude
      - ./config/shared/BASE_AGENT.md:/home/claude/.claude/CLAUDE.md
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/claude/.config/gh
      - ./config/ssh/id_ed25519:/home/claude/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/claude/.gitconfig.host:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/claude/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
      - ./skills:/home/claude/.claude/skills:ro
      - ./commands:/home/claude/.claude/commands:ro
      - ./agents:/home/claude/.claude/agents:ro
      - ./hooks:/home/claude/.claude/hooks:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  ########################
  ### CODEX CONTAINERS ###
  ########################
  codex-base:
    build:
      context: .
      dockerfile: containers/Dockerfile.codex-base
    image: agent-cubicle-codex-base:latest
    container_name: codex-base-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/codex/:/home/codex/.codex
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/codex/.config/gh
      - ./config/ssh/id_ed25519:/home/codex/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/codex/.gitconfig.host:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  codex-python:
    depends_on:
      - codex-base
    build:
      context: .
      dockerfile: containers/Dockerfile.codex-python
    container_name: codex-python-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/codex:/home/codex/.codex
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/codex/.config/gh
      - ./config/ssh/id_ed25519:/home/codex/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/codex/.gitconfig.host:ro
      - ./config/shared/BASE_AGENT.md:/home/codex/.codex/AGENTS.md:ro
      - ./skills:/home/codex/.codex/skills:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/codex/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  codex-ruby:
    depends_on:
      - codex-base
    build:
      context: .
      dockerfile: containers/Dockerfile.codex-ruby
    container_name: codex-ruby-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/codex:/home/codex/.codex
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/codex/.config/gh
      - ./config/obsidian-mcp:/home/codex/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
      - ./config/ssh/id_ed25519:/home/codex/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/codex/.gitconfig.host:ro
      - ./skills:/home/codex/.codex/skills:ro
      - ./config/shared/BASE_AGENT.md:/home/codex/.codex/AGENTS.md:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  ##########################
  ### COPILOT CONTAINERS ###
  ##########################
  copilot-base:
    build:
      context: .
      dockerfile: containers/Dockerfile.copilot-base
    image: agent-cubicle-copilot-base:latest
    container_name: copilot-base-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/copilot/:/home/copilot/.copilot
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/copilot/.config/gh
      - ./config/ssh/id_ed25519:/home/copilot/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/copilot/.gitconfig.host:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  copilot-python:
    depends_on:
      - copilot-base
    build:
      context: .
      dockerfile: containers/Dockerfile.copilot-python
    container_name: copilot-python-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/copilot:/home/copilot/.copilot
      - ./config/github-copilot:/home/copilot/.config/github-copilot
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/copilot/.config/gh
      - ./config/ssh/id_ed25519:/home/copilot/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/copilot/.gitconfig.host:ro
      - ./config/shared/BASE_AGENT.md:/home/copilot/.copilot/agents/BASE_AGENT.md
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/copilot/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      - GITHUB_TOKEN=${COPILOT_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  copilot-ruby:
    depends_on:
      - copilot-base
    build:
      context: .
      dockerfile: containers/Dockerfile.copilot-ruby
    container_name: copilot-ruby-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/copilot:/home/copilot/.copilot
      - ./config/github-copilot:/home/copilot/.config/github-copilot
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/copilot/.config/gh
      - ./config/ssh/id_ed25519:/home/copilot/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/copilot/.gitconfig.host:ro
      - ./config/shared/BASE_AGENT.md:/home/copilot/.copilot/agents/BASE_AGENT.md
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/copilot/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      - GITHUB_TOKEN=${COPILOT_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  #########################
  ### GEMINI CONTAINERS ###
  #########################
  gemini-base:
    build:
      context: .
      dockerfile: containers/Dockerfile.gemini-base
    image: agent-cubicle-gemini-base:latest
    container_name: gemini-base-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/gemini/:/home/gemini/.gemini
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/gemini/.config/gh
      - ./config/ssh/id_ed25519:/home/gemini/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/gemini/.gitconfig.host:ro
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  gemini-python:
    depends_on:
      - gemini-base
    build:
      context: .
      dockerfile: containers/Dockerfile.gemini-python
    container_name: gemini-python-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/gemini/:/home/gemini/.gemini
      - ./config/shared/BASE_AGENT.md:/home/gemini/.gemini/GEMINI.md
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/gemini/.config/gh
      - ./config/ssh/id_ed25519:/home/gemini/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/gemini/.gitconfig.host:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/gemini/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle

  gemini-ruby:
    depends_on:
      - gemini-base
    build:
      context: .
      dockerfile: containers/Dockerfile.gemini-ruby
    container_name: gemini-ruby-cubicle
    stdin_open: true
    tty: true
    volumes:
      - ./config/gemini/:/home/gemini/.gemini
      - ./config/shared/BASE_AGENT.md:/home/gemini/.gemini/GEMINI.md
      - /Users/jplatta/repos:/cubicle/repos
      - /Volumes/Server/Notes/my_ken:/cubicle/notes
      - /Users/jplatta/.config/gh:/home/gemini/.config/gh
      - ./config/ssh/id_ed25519:/home/gemini/.ssh/id_ed25519:ro
      - ~/.gitconfig:/home/gemini/.gitconfig.host:ro
      - ./bin/entry-base.sh:/entry-base.sh:ro
      - ./config/obsidian-mcp:/home/gemini/.config/obsidian-mcp
      - /Users/jplatta/repos/second_brain/obsidian-mcp:/obsidian-mcp
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - TODOIST_TOKEN=${TODOIST_TOKEN}
      - GIT_TERMINAL_PROMPT=0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          memory: 8G
        reservations:
          memory: 4G
    working_dir: /cubicle